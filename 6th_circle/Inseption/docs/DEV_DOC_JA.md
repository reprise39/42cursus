# 開発者用ドキュメント - Inception

このドキュメントでは、Inceptionインフラの技術的なセットアップと保守について説明します。

## 1. 事前準備（環境構築）
- **OS**: Debian (Stableバージョンの使用を推奨)。ログイン名はmkuida。
- **ツール**: Docker, Docker Compose, GNU Make。
- **権限**: 実行ユーザーがDockerグループに属していること、sudo権限を持っていること。
- **ドメイン登録**: ホストマシンの /etc/hosts に 127.0.0.1 mkuida.42.fr を追加すること。

## 2. ビルドと実行手順
1. **リポジトリをクローン**:
   `git clone <repository_url>`
2. **設定**:
   `secrets` ディレクトリ内に４つの `.txt` ファイルを作成し、タイトルのパスワードを設定します。

> **補足:** クローン時に存在する.txt.exampleから.exampleを削除して中身を記述すれば良い形に準備されています。<br>
> 中に記述すすパスワードは公開しないでください。以下の方法、またはそれ相当の強度のパスワード作成をおすすめします。 <br>
> `pwgen 16 1`


3. **起動**:
   `make`
   このコマンドにより、必要なボリュームディレクトリの作成、Dockerfileからのイメージビルド、コンテナの起動が自動で行われます。

   `make bonus`
   このコマンドにより、上記に加え、静的htmlファイルへのアクセスも可能になります。
   

## 3. 管理用コマンド
- `make re`: 完全に再構築します（fclean + all）。
- `make clean`: コンテナを停止し、コンテナ・ネットワークを削除します。
- `make fclean`: コンテナ、イメージに加え、**すべての永続データ（ボリューム）を削除**します。
- `docker logs <コンテナ名>`: デバッグのために各サービスのログを確認します。


## 4. データの永続化について
コンテナを削除してもデータが消えないよう、ホストマシンのディレクトリをバインドマウントしています。
- **WordPressファイル**: `/home/mkuida/data/wordpress`
- **データベースファイル**: `/home/mkuida/data/mariadb`

ボリュームの設定詳細は `srcs/docker-compose.yml` 内の `volumes` セクションに定義されています。

> **注意:** make clean を含むコマンド（make fcleanなど）ではこれらも削除されます。注意してください。